(function(e){function t(t){for(var s,a,c=t[0],r=t[1],l=t[2],d=0,h=[];d<c.length;d++)a=c[d],o[a]&&h.push(o[a][0]),o[a]=0;for(s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s]);u&&u(t);while(h.length)h.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],s=!0,c=1;c<n.length;c++){var r=n[c];0!==o[r]&&(s=!1)}s&&(i.splice(t--,1),e=a(a.s=n[0]))}return e}var s={},o={app:0},i=[];function a(t){if(s[t])return s[t].exports;var n=s[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=s,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)a.d(n,s,function(t){return e[t]}.bind(null,s));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],r=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var u=r;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0412":function(e,t,n){"use strict";var s=n("3096"),o=n.n(s);o.a},"0ca8":function(e,t,n){},2856:function(e,t,n){},"2b11":function(e,t,n){"use strict";var s=n("51d2"),o=n.n(s);o.a},3096:function(e,t,n){},"51d2":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("097d");var s=n("2b0e"),o=n("0086"),i=n.n(o),a=n("37c3"),c=n.n(a),r=n("498a"),l=n("9ae9"),u=n("cbd0"),d=n("1073"),h=n("b1fc"),f=n("3d31"),m=n("44d4"),p=n("7049"),g=n("8b3d"),v=n("dbbe"),w=n("f7ca"),y=n("f9bc"),b=(n("ab8b"),n("ecee")),k=n("c074"),_=n("ad3d"),S=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("div",{attrs:{id:"title"}},[n("h1",[e._v(" simple flowchart")]),n("button",{on:{click:function(t){e.isPanelShow=!e.isPanelShow}}},[e._v(e._s(e.isPanelShow?"Hide Panel":"Show Panel"))]),e.isPanelShow?n("button",{on:{click:function(t){e.isRawScene=!e.isRawScene}}},[e._v(e._s(e.isRawScene?"Show Pretty":"Show Raw"))]):e._e(),e.isPanelShow?n("div",{staticClass:"panel-area"},[n("div",{staticClass:"extraction-panel",domProps:{innerHTML:e._s(e.isRawScene?e.rawScene:e.prettyScene)}})]):e._e()]),n("br"),n("div",{staticClass:"flowchart"},[n("h2",{staticStyle:{"overflow-x":"auto"}},e._l(e.stages,function(t,s){return n("nobr",{key:s},[n("b-button",{attrs:{variant:"outline-dark",size:"lg"},on:{click:function(t){e.newStageType=s,e.$bvModal.show("createModal")}}},[e._v("\n          "+e._s(t.name)+"\n        ")]),e._v("\n         \n        "),parseInt(s)+1<Object.keys(e.stages).length?n("font-awesome-icon",{attrs:{icon:["fas","arrow-right"],size:"lg"}}):e._e(),e._v("\n         \n      ")],1)}),1),n("b-row",{attrs:{"align-h":"end"}},[n("b-col",{attrs:{sm:"1"}},[n("label",[e._v("Scale:")])]),n("b-col",{attrs:{sm:"3"}},[n("b-form-input",{attrs:{type:"range",min:"0",max:"1",step:"0.1"},model:{value:e.scene.scale,callback:function(t){e.$set(e.scene,"scale",t)},expression:"scene.scale"}})],1)],1),n("simple-flowchart",{attrs:{scene:e.scene,stages:e.stages,height:1200},on:{"update:scene":function(t){e.scene=t},nodeClick:e.nodeClick,nodeDelete:e.nodeDelete,linkBreak:e.linkBreak,linkAdded:e.linkAdded,canvasClick:e.canvasClick,"update:stages":function(t){e.stages=t}}})],1),n("b-modal",{ref:"createModal",staticClass:"modal-backdrop fade",attrs:{id:"createModal",title:"New Node","hide-footer":"","hide-backdrop":""}},[n("b-form",{staticClass:"w-100",on:{submit:e.onCreateFormSubmit,reset:e.onCreateFormReset}},[n("b-form-select",{staticClass:"mb-3",attrs:{required:""},model:{value:e.newNodeType,callback:function(t){e.newNodeType=t},expression:"newNodeType"}},[n("b-form-select-option",{attrs:{value:null,disabled:""}},[e._v("Please select a node type")]),e._l(e.nodeCategory,function(t,s){return t.stage===parseInt(e.newStageType)?n("b-form-select-option",{key:"category-"+s,attrs:{value:s}},[e._v("\n          "+e._s(t.name)+"\n        ")]):e._e()})],2),n("br"),n("b-button-group",[n("b-button",{attrs:{type:"submit",variant:"primary"}},[n("b",[e._v("Submit")])]),e._v("\n         \n        "),n("b-button",{attrs:{type:"reset",variant:"danger"}},[n("b",[e._v("Cancel")])])],1)],1)],1)],1)},x=[],M=(n("7f7f"),n("8afe")),O=(n("a481"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"flowchart",attrs:{id:"flowchart"}},[n("div",{directives:[{name:"mouseup-outside",rawName:"v-mouseup-outside",value:e.handleMouseUp,expression:"handleMouseUp"},{name:"touch",rawName:"v-touch:moving",value:e.handleTouchMove,expression:"handleTouchMove",arg:"moving"},{name:"touch",rawName:"v-touch:end",value:e.handleTouchUp,expression:"handleTouchUp",arg:"end"},{name:"touch",rawName:"v-touch:start",value:e.handleTouchDown,expression:"handleTouchDown",arg:"start"}],staticClass:"flowchart-container",on:{mouseup:e.handleMouseUp,mousedown:e.handleMouseDown,mousemove:e.handleMouseMove}},[e._l(e.scene.nodes,function(t,s){return n("flowchart-node",e._b({key:"node"+s,ref:"node"+s,refInFor:!0,attrs:{options:e.nodeOptions},on:{linkingStart:function(n){return e.linkingStart(t.id,n)},linkingStop:function(n){return e.linkingStop(t.id)},nodeSelected:function(n){return e.nodeSelected(t.id,n)}}},"flowchart-node",t,!1,!0))}),n("svg",{attrs:{width:"100%",height:e.height+"px"}},[e._l(e.lines(),function(t,s){return n("flowchart-link",e._b({key:"link"+s,on:{deleteLink:function(n){return e.linkDelete(t.id)}}},"flowchart-link",t,!1,!0))}),e._l(e.stages,function(t,s){return n("line",{key:"line-"+s,staticStyle:{stroke:"rgb(100, 100, 100)","stroke-width":"6",cursor:"col-resize"},attrs:{id:"line-"+s,x1:e.calStageWidth(s),y1:"0",x2:e.calStageWidth(s),y2:"100vh","stroke-dasharray":"20, 20"}})}),e._l(e.stages,function(t,s){return n("text",{key:"text-"+s,staticStyle:{"font-size":"24px"},attrs:{x:e.calStageWidth(s)+50*e.scene.scale,y:"50",textLength:"100",lengthAdjust:"spacing"}},[e._v("\n        "+e._s(t.name)+"\n        ")])})],2)],2)])])}),T=[],D=(n("456d"),n("28a5"),n("f751"),n("ac6a"),n("c93e")),N=(n("6762"),n("2fdb"),n("20d6"),n("7514"),n("9393")),B=(n("c5f6"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("g",{on:{mouseover:e.handleMouseOver,mouseleave:e.handleMouseLeave}},[n("path",{style:e.pathStyle,attrs:{d:e.dAttr}}),e.show.delete?n("a",{on:{click:e.deleteLink}},[n("text",{attrs:{"text-anchor":"middle",transform:e.arrowTransform,"font-size":"30"}},[e._v("×")])]):n("path",{style:e.arrowStyle,attrs:{d:"M -1 -1 L 0 1 L 1 -1 z",transform:e.arrowTransform}})])}),C=[],X={name:"FlowchartLink",props:{start:{type:Array,default:function(){return[0,0]}},end:{type:Array,default:function(){return[0,0]}},id:Number},data:function(){return{show:{delete:!1}}},methods:{handleMouseOver:function(){this.show.delete=!0},handleMouseLeave:function(){this.show.delete=!1},calculateCenterPoint:function(){var e=(this.end[0]-this.start[0])/2,t=(this.end[1]-this.start[1])/2;return[this.start[0]+e,this.start[1]+t]},calculateRotation:function(){var e=this.end[0]-this.start[0];e=e>10?e*=.2:e;var t=this.end[1]-this.start[1],n=-Math.atan2(e,t),s=180*n/Math.PI;return s<0?s+360:s},deleteLink:function(){this.$emit("deleteLink")}},computed:{pathStyle:function(){return{stroke:"#8492a6",strokeWidth:2.73205,fill:"none"}},arrowStyle:function(){return{stroke:"#8492a6",strokeWidth:5.73205,fill:"none"}},arrowTransform:function(){var e=this.calculateCenterPoint(),t=Object(N["a"])(e,2),n=t[0],s=t[1],o=this.calculateRotation();return"translate(".concat(n,", ").concat(s,") rotate(").concat(o,")")},dAttr:function(){var e=this.start[0],t=this.start[1],n=this.end[0],s=this.end[1],o=e,i=t,a=n,c=s;return o+=.8*(n-e),a-=.8*(n-e),"M ".concat(e,", ").concat(t," C ").concat(o,", ").concat(i,", ").concat(a,", ").concat(c,", ").concat(n,", ").concat(s)}}},L=X,Y=(n("0412"),n("2877")),$=Object(Y["a"])(L,B,C,!1,null,"2868a9ca",null);$.options.__file="FlowchartLink.vue";var j=$.exports,E=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"touch",rawName:"v-touch:start",value:e.handleMousedown,expression:"handleMousedown",arg:"start"},{name:"touch",rawName:"v-touch:longtap",value:e.handleMouseDouble,expression:"handleMouseDouble",arg:"longtap"}],staticClass:"flowchart-node",class:{selected:e.options.selected===e.id},style:e.nodeStyle,on:{dblclick:e.handleMouseDouble,mousedown:e.handleMousedown,mouseover:e.handleMouseOver,mouseleave:e.handleMouseLeave}},[n("div",{staticClass:"node-port node-input",class:{"node-port-tag":e.stat},on:{mouseup:e.inputMouseUp,mousedown:e.inputMouseDown}}),n("div",{staticClass:"node-main",attrs:{id:"node-main_"+e.id}},["error"===e.stat?n("div",{staticClass:"node-error",attrs:{id:"node-main_"+e.id}},[n("span",[e._v("Error")])]):"warning"===e.stat?n("div",{staticClass:"node-warning",attrs:{id:"node-main_"+e.id}},[n("span",[e._v("Warning")])]):n("div",{staticClass:"node-success",attrs:{id:"node-main_"+e.id}},[n("span",[e._v("Success")])]),n("div",{ref:"nodeType",staticClass:"node-type",attrs:{id:"node-type_"+e.id},domProps:{textContent:e._s(e.type)}}),n("div",{staticClass:"node-label",attrs:{id:"label_"+e.id}},[n("div",{ref:"labelTitle",staticClass:"node-label-title",attrs:{id:"label-title_"+e.id},domProps:{textContent:e._s(e.taskId)}}),e.outButtons.length>0?n("div",{staticClass:"node-buttons",attrs:{id:"node-buttons_"+e.id}},e._l(e.outButtons,function(t,s){return n("div",{key:s,staticClass:"node-label-button",attrs:{id:"button_"+e.id+"_"+s}},[n("span",[e._v(e._s(t.text))]),n("div",{staticClass:"node-port node-output",style:e.buttonPortStyle(s),attrs:{id:"port_"+e.id+"_"+s},on:{mousedown:function(t){return e.outputMouseDown(s,t)}}})])}),0):e._e()])]),0===e.outButtons.length?n("div",{staticClass:"node-port node-output",class:{"node-port-tag":e.stat},attrs:{id:"node-output_"+e.id},on:{mousedown:function(t){return e.outputMouseDown(-1,t)}}}):e._e(),n("div",{directives:[{name:"show",rawName:"v-show",value:e.show.delete,expression:"show.delete"}],staticClass:"node-delete"},[e._v("×")])])},I=[],P={name:"FlowchartNode",props:{id:{type:Number,default:1e3,validator:function(e){return"number"===typeof e}},centeredX:{type:Number,default:0,validator:function(e){return"number"===typeof e}},centeredY:{type:Number,default:0,validator:function(e){return"number"===typeof e}},type:{type:String,default:"Default"},taskId:{type:String,default:"input name"},options:{type:Object,default:function(){return{centerX:1024,scale:1,centerY:140}}},stat:{type:String,default:function(){return"success"}},outButtons:{type:Array,default:function(){return[]}},upStream:{type:Array,default:function(){return[]}}},data:function(){return{show:{delete:!0},linkingStart:!1,reload:!1}},mounted:function(){this.show.delete=!1},computed:{nodeStyle:function(){return{top:this.centeredY*this.options.scale+"px",left:this.centeredX*this.options.scale+"px",transform:"scale(".concat(this.options.scale,")")}}},methods:{buttonPortStyle:function(e){var t=this.$refs.nodeType;if(t){var n=this.$refs.labelTitle;if(n){for(var s=t.offsetHeight,o=n.offsetHeight,i=o+s,a=null,c=e;c>=0;c--)a=document.getElementById("button_"+this.id+"_"+c),a&&(i+=c===e?a.offsetHeight/1.75:a.offsetHeight);var r=0;return null!==this.stat&&(r+=40),i+=r,{top:i+"px",right:"-12px",marginTop:"0px"}}}},handleMousedown:function(e){var t=e.target||e.srcElement;t.className.indexOf("node-input")<0&&t.className.indexOf("node-output")<0&&this.$emit("nodeSelected",e),e.type.includes("mouse")&&e.preventDefault()},handleMouseOver:function(){this.show.delete=!0},handleMouseLeave:function(){this.show.delete=!1},handleMouseDouble:function(){return null},outputMouseDown:function(e,t){t.buttonIndex=e,this.$emit("linkingStart",t),t.type.includes("mouse")&&t.preventDefault()},outputMouseMove:function(e){this.linkingStart&&this.$emit("linkingStart")},outputMouseMoveFromButtonNode:function(e,t){this.linkingStart&&this.$emit("linkingStart",e,t)},outputMouseUp:function(e){this.linkingStart=!1,e.type.includes("mouse")&&e.preventDefault()},inputMouseDown:function(e){e.type.includes("mouse")&&e.preventDefault()},inputMouseUp:function(e){this.$emit("linkingStop"),e.type.includes("mouse")&&e.preventDefault()}}},W=P,F=(n("2b11"),Object(Y["a"])(W,E,I,!1,null,"716bcb22",null));F.options.__file="FlowchartNode.vue";var R=F.exports;function A(e){var t=e.getBoundingClientRect(),n=window.pageYOffset,s=window.pageXOffset,o=t.top+n,i=t.left+s;return{top:Math.round(o),left:Math.round(i)}}function H(e,t){var n,s=null;t.type.includes("mouse")?(n=t.pageX||t.clientX+document.documentElement.scrollLeft,s=t.pageY||t.clientY+document.documentElement.scrollTop):(n=t.touches[0].pageX||t.touches[0].clientX+document.documentElement.scrollLeft,s=t.touches[0].pageY||t.touches[0].clientY+document.documentElement.scrollTop);var o=A(e),i=n-o.left,a=s-o.top;return[i,a]}var U={name:"VueFlowchart",props:{scene:{type:Object,default:function(){return{centerX:0,scale:1,centerY:0,nodes:[],links:[]}}},height:{type:Number,default:400},stages:{type:Object,default:function(){return{}}}},data:function(){return{action:{linking:!1,dragging:!1,scrolling:!1,movingBound:!1,selected:0,selectedBound:null},mouse:{x:0,y:0,lastX:0,lastY:0},draggingLink:null,rootDivOffset:{top:0,left:0},moving:!1,draggingNodeTop:0,draggingNodeLeft:0,actionType:"",window:{width:0,height:0}}},created:function(){window.addEventListener("resize",this.windowsResize),this.windowsResize()},destroyed:function(){window.removeEventListener("resize",this.windowsResize)},components:{FlowchartLink:j,FlowchartNode:R},computed:{nodeOptions:function(){return{centerY:this.scene.centerY,centerX:this.scene.centerX,scale:this.scene.scale,offsetTop:this.rootDivOffset.top,offsetLeft:this.rootDivOffset.left,selected:this.action.selected}}},mounted:function(){this.rootDivOffset.top=this.$el?this.$el.offsetTop:0,this.rootDivOffset.left=this.$el?this.$el.offsetLeft:0},methods:{calStageWidth:function(e){return parseInt(e)>0?this.stages[e].width=this.stages[e-1].width+this.stages[e-1].widthDelta*this.scene.scale:this.stages[e].width=this.scene.centerX*this.scene.scale,this.stages[e].width},lines:function(){var e=this,t=this.scene.links.map(function(t){var n,s,o,i,a,c,r=e.findNodeWithID(t.from),l=e.findNodeWithID(t.to);n=r.centeredX,s=r.centeredY;var u=e.getPortPosition(r,"right",n,s,t.outButton),d=Object(N["a"])(u,2);i=d[0],o=d[1],n=l.centeredX,s=l.centeredY;var h=e.getPortPosition(l,"left",n,s),f=Object(N["a"])(h,2);return a=f[0],c=f[1],{start:[i,o],end:[a,c],id:t.id}});if(this.draggingLink){var n,s,o,i,a=this.findNodeWithID(this.draggingLink.from);n=a.centeredX,s=a.centeredY;var c=this.getPortPosition(a,"right",n,s,this.draggingLink.buttonIndex),r=Object(N["a"])(c,2);i=r[0],o=r[1],t.push({start:[i,o],end:[this.draggingLink.mx,this.draggingLink.my]})}return t},findNodeWithID:function(e){return this.scene.nodes.find(function(t){return e===t.id})},getPortPosition:function(e,t,n,s,o){var i=document.getElementById("node-main_"+e.id),a=0,c=0;i&&(a=i.offsetHeight,c=i.offsetWidth);var r=0;if(null!==e.stat&&(r+=40),"right"===t){var l=null;if(!o||-1===o)return[(n+c)*this.scene.scale,(s+a/2+r/2-4)*this.scene.scale];l=e.outButtons.findIndex(function(e){return e.id===o});var u=document.getElementById("node-type_".concat(e.id));if(!u)return[0,0];var d=document.getElementById("label-title_".concat(e.id));if(!d)return[0,0];for(var h=u.offsetHeight,f=d.offsetHeight,m=f+h,p=null,g=l;g>=0;g--)p=document.getElementById("button_"+e.id+"_"+g),p&&(m+=g===l?p.offsetHeight/1.75:p.offsetHeight);return m+=r,[(n+c)*this.scene.scale,(s+m)*this.scene.scale]}if("left"===t)return[n*this.scene.scale,(s+a/2+r/2-4)*this.scene.scale]},linkingStart:function(e,t){this.action.linking=!0;var n,s=null;if(t.type.includes("mouse")){var o=H(this.$el,t),i=Object(N["a"])(o,2);n=i[0],s=i[1]}else{var a=H(this.$el,t),c=Object(N["a"])(a,2);n=c[0],s=c[1]}this.draggingLink={from:e,buttonIndex:t.buttonIndex,mx:n,my:s}},linkingStop:function(e){var t=this;if(this.draggingLink&&this.draggingLink.from!==e){var n=this.scene.links.find(function(n){return n.from===t.draggingLink.from&&n.to===e&&(-1===n.outButton||n.outButton===t.findNodeWithID(n.from).outButtons[t.draggingLink.buttonIndex].id)}),s=this.findNodeWithID(this.draggingLink.from),o=this.findNodeWithID(e),i=s.stage<=o.stage;if(!n&&i){var a=Math.max.apply(Math,[-1].concat(Object(M["a"])(this.scene.links.map(function(e){return e.id})))),c=s.outButtons&&s.outButtons.length?s.outButtons[this.draggingLink.buttonIndex].id:-1,r={id:a+1,from:this.draggingLink.from,to:e,outButton:c};this.scene.links.push(r),o.upStream.push({id:this.draggingLink.from,button:c}),this.$emit("linkAdded",r)}}this.draggingLink=null},linkDelete:function(e){var t=this,n=this.scene.links.find(function(t){return t.id===e});if(n){var s=this.scene.links.findIndex(function(t){return t.id===e}),o=this.findNodeWithID(this.scene.links[s].to);o.upStream=o.upStream.filter(function(e){return e.id!==t.scene.links[s].from||e.button!==t.scene.links[s].outButton}),this.scene.links.splice(s,1),this.$emit("linkBreak",n)}},nodeSelected:function(e,t){this.action.dragging=!0,this.action.selected=e,this.$emit("nodeClick",e),t.type.includes("mouse")?(this.mouse.lastX=t.pageX||t.clientX+document.documentElement.scrollLeft,this.mouse.lastY=t.pageY||t.clientY+document.documentElement.scrollTop):(this.mouse.lastX=t.touches[0].pageX||t.touches[0].clientX+document.documentElement.scrollLeft,this.mouse.lastY=t.touches[0].pageY||t.touches[0].clientY+document.documentElement.scrollTop)},handleMove:function(e){var t=this;if(this.action.linking){var n=H(this.$el,e),s=Object(N["a"])(n,2);this.mouse.x=s[0],this.mouse.y=s[1],e.type.includes("mouse")?(this.mouse.x=e.pageX||e.clientX+document.documentElement.scrollLeft,this.mouse.y=e.pageY||e.clientY+document.documentElement.scrollTop):(this.mouse.x=e.touches[0].pageX||e.touches[0].clientX+document.documentElement.scrollLeft,this.mouse.y=e.touches[0].pageY||e.touches[0].clientY+document.documentElement.scrollTop);var o=document.getElementById("app").scrollTop,i=document.getElementById("title").offsetHeight+22+87,a=[this.mouse.x,this.mouse.y-i+o];this.draggingLink.mx=a[0],this.draggingLink.my=a[1]}if(this.action.dragging){e.type.includes("mouse")?(this.mouse.x=e.pageX||e.clientX+document.documentElement.scrollLeft,this.mouse.y=e.pageY||e.clientY+document.documentElement.scrollTop):(this.mouse.x=e.touches[0].pageX||e.touches[0].clientX+document.documentElement.scrollLeft,this.mouse.y=e.touches[0].pageY||e.touches[0].clientY+document.documentElement.scrollTop);var c=this.mouse.x-this.mouse.lastX,r=this.mouse.y-this.mouse.lastY;this.mouse.lastX=this.mouse.x,this.mouse.lastY=this.mouse.y,this.moveSelectedNode(c,r)}if(this.action.scrolling){var l=H(this.$el,e),u=Object(N["a"])(l,2);this.mouse.x=u[0],this.mouse.y=u[1];var d=this.mouse.x-this.mouse.lastX,h=this.mouse.y-this.mouse.lastY;this.mouse.lastX=this.mouse.x,this.mouse.lastY=this.mouse.y,this.scene.centerX+=d/this.scene.scale,this.scene.centerY+=h/this.scene.scale,this.scene.nodes=this.scene.nodes.map(function(e){return Object(D["a"])({},e,{centeredX:e.centeredX+d/t.scene.scale,centeredY:e.centeredY+h/t.scene.scale})})}if(this.action.movingBound){var f=H(this.$el,e),m=Object(N["a"])(f,2);this.mouse.x=m[0],this.mouse.y=m[1];var p=(this.mouse.x-this.mouse.lastX)/this.scene.scale;this.mouse.lastX=this.mouse.x,this.action.selectedBound>0&&this.stages[this.action.selectedBound-1].width-p+200*this.scene.scale<this.stages[this.action.selectedBound].width&&(this.stages[this.action.selectedBound-1].widthDelta+=p,Object(M["a"])(Array(this.scene.nodes.length).keys()).forEach(function(e){t.scene.nodes[e].stage>=t.action.selectedBound?t.$set(t.scene.nodes,e,Object.assign(t.scene.nodes[e],{centeredX:t.scene.nodes[e].centeredX+p,centeredY:t.scene.nodes[e].centeredY})):(t.scene.nodes[e].centeredX+200)*t.scene.scale>t.calStageWidth(t.action.selectedBound)&&t.$set(t.scene.nodes,e,Object.assign(t.scene.nodes[e],{centeredX:t.calStageWidth(t.action.selectedBound)/t.scene.scale-200,centeredY:t.scene.nodes[e].centeredY}))}))}},handleUp:function(e){var t=e.target||e.srcElement;this.$el.contains(t)&&(("string"!==typeof t.className||t.className.indexOf("node-input")<0)&&(this.draggingLink=null),"string"===typeof t.className&&t.className.indexOf("node-delete")>-1&&this.nodeDelete(this.action.selected)),this.action.linking=!1,this.action.dragging=!1,this.action.scrolling=!1,this.action.movingBound=!1,this.action.selected=null,this.action.selectedBound=null},handleDown:function(e){var t=e.target||e.srcElement;if(t===this.$el||t.matches("line, line *")){this.action.selectedBound=t.id.split("-")[1],this.action.selectedBound>0?this.action.movingBound=!0:this.action.scrolling=!0;var n=H(this.$el,e),s=Object(N["a"])(n,2);this.mouse.lastX=s[0],this.mouse.lastY=s[1],this.action.selected=null}else if(t===this.$el||t.matches("svg, svg *")){this.action.scrolling=!0;var o=H(this.$el,e),i=Object(N["a"])(o,2);this.mouse.lastX=i[0],this.mouse.lastY=i[1],this.action.selected=null}this.$emit("canvasClick",e)},handleMouseMove:function(e){e.type.includes("mouse")&&this.handleMove(e)},handleMouseUp:function(e){e.type.includes("mouse")&&this.handleUp(e)},handleMouseDown:function(e){e.type.includes("mouse")&&this.handleDown(e)},handleTouchMove:function(e){e.type.includes("touch")&&this.handleMove(e)},handleTouchUp:function(e){e.type.includes("touch")&&this.handleUp(e)},handleTouchDown:function(e){e.type.includes("touch")&&this.handleDown(e)},moveSelectedNode:function(e,t){var n=this,s=this.scene.nodes.findIndex(function(e){return e.id===n.action.selected}),o=this.scene.nodes[s].centeredX+e/this.scene.scale,i=this.scene.nodes[s].centeredY+t/this.scene.scale;this.scene.nodes[s].stage+1<Object.keys(this.stages).length&&(o=Math.min(o,this.calStageWidth(this.scene.nodes[s].stage+1)/this.scene.scale-200)),o=Math.max(o,this.calStageWidth(this.scene.nodes[s].stage)/this.scene.scale),this.$set(this.scene.nodes,s,Object.assign(this.scene.nodes[s],{centeredX:o,centeredY:i}))},nodeDelete:function(e){var t=this;this.scene.links.forEach(function(n){if(n.from===e){var s=t.findNodeWithID(n.to);s.upStream=s.upStream.filter(function(t){return t.id!==e})}}),this.scene.links=this.scene.links.filter(function(t){return t.from!==e&&t.to!==e}),this.scene.nodes=this.scene.nodes.filter(function(t){return t.id!==e}),this.$emit("nodeDelete",e)},windowsResize:function(){this.window.width=window.innerWidth,this.window.height=window.innerHeight}}},z=U,J=(n("fc94"),Object(Y["a"])(z,O,T,!1,null,"2f3f0cf5",null));J.options.__file="SimpleFlowchart.vue";var q=J.exports,V={name:"app",components:{SimpleFlowchart:q},data:function(){return{isRawScene:!1,isPanelShow:!1,scene:{centerX:50,centerY:0,scale:1,nodes:[],links:[]},newNodeType:null,nodeCategory:[{name:"nodeType1",stage:0,outButtons:[]},{name:"nodeType2",stage:1,outButtons:[]},{name:"nodeType3",stage:2,outButtons:[{id:0,text:"Option 1"},{id:1,text:"Option 2"},{id:2,text:"Option 3"}]},{name:"nodeType4",stage:2,outButtons:[]},{name:"nodeType5",stage:2,outButtons:[]},{name:"nodeType6",stage:2,outButtons:[]},{name:"nodeType7",stage:3,outButtons:[]}],newStageType:null,stages:{0:{name:"stage1",width:0,widthDelta:500},1:{name:"stage2",width:0,widthDelta:500},2:{name:"stage3",width:0,widthDelta:500},3:{name:"stage4",width:0,widthDelta:500}}}},computed:{prettyScene:function(){return JSON.stringify(this.scene,null,"\t").replace(/\n/gi,"<br />").replace(/\t/gi,"&nbsp;&nbsp;")},rawScene:function(){return JSON.stringify(this.scene)}},methods:{canvasClick:function(e){console.log("canvas Click, event:",e)},addNode:function(e){var t=Math.max.apply(Math,[-1].concat(Object(M["a"])(this.scene.nodes.map(function(e){return e.id}))));this.scene.nodes.push({id:t+1,centeredX:this.stages[this.nodeCategory[this.newNodeType].stage].width/this.scene.scale,centeredY:this.scene.centerY+50,type:this.nodeCategory[this.newNodeType].name,stage:this.nodeCategory[this.newNodeType].stage,taskId:"".concat(this.nodeCategory[this.newNodeType].name,"_").concat(t+1),outButtons:this.nodeCategory[this.newNodeType].outButtons,stat:e,upStream:[]})},nodeClick:function(e){console.log("node click",e)},nodeDelete:function(e){console.log("node delete",e)},linkBreak:function(e){console.log("link break",e)},linkAdded:function(e){console.log("new link added:",e)},onCreateFormSubmit:function(e){e.preventDefault(),this.addNode("warning"),this.newNodeType=null,this.$refs.createModal.hide()},onCreateFormReset:function(e){e.preventDefault(),this.newNodeType=null,this.$refs.createModal.hide()}}},G=V,K=(n("5c0b"),Object(Y["a"])(G,S,x,!1,null,null,null));K.options.__file="App.vue";var Q=K.exports;s["a"].config.productionTip=!1,s["a"].use(r["a"]),s["a"].use(l["a"]),s["a"].use(u["a"]),s["a"].use(d["a"]),s["a"].use(h["a"]),s["a"].use(f["a"]),s["a"].use(m["a"]),s["a"].use(p["a"]),s["a"].use(g["a"]),s["a"].use(v["a"]),s["a"].use(w["a"]),s["a"].use(y["a"]),s["a"].use(i.a),s["a"].use(c.a),b["c"].add(k["a"]),s["a"].component("font-awesome-icon",_["a"]),new s["a"]({render:function(e){return e(Q)}}).$mount("#app")},"5c0b":function(e,t,n){"use strict";var s=n("2856"),o=n.n(s);o.a},fc94:function(e,t,n){"use strict";var s=n("0ca8"),o=n.n(s);o.a}});
//# sourceMappingURL=app.d9d2559f.js.map